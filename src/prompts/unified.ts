// src/prompts/unified.ts

import { DocType, DOC_TYPE_CONFIG } from './core';

export interface UnifiedPromptOptions {
  text: string;
  docType: DocType;
  style?: 'sadhu' | 'cholito' | 'none' | '';
  tone?: string;
}

const toneDescriptions: Record<string, string> = {
  'formal': 'ржЖржирзБрж╖рзНржарж╛ржирж┐ржХ - ржЖржкржирж┐/ржЖржкржирж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи',
  'informal': 'ржЕржирж╛ржирзБрж╖рзНржарж╛ржирж┐ржХ - рждрзБржорж┐/рждрзЛржорж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи',
  'professional': 'ржкрзЗрж╢рж╛ржжрж╛рж░ - рж╕рзНржкрж╖рзНржЯ, ржЖрждрзНржоржмрж┐рж╢рзНржмрж╛рж╕рзА ржнрж╛рж╖рж╛',
  'friendly': 'ржмржирзНржзрзБрждрзНржмржкрзВрж░рзНржг - ржЙрж╖рзНржг, ржЖржмрзЗржЧржкрзВрж░рзНржг рж╢ржмрзНржж',
  'respectful': 'рж╕ржорзНржорж╛ржиржЬржиржХ - ржмрж┐ржирзАржд, рж╢рзНрж░ржжрзНржзрж╛рж╕рзВржЪржХ',
  'persuasive': 'ржкрзНрж░ржнрж╛ржмрж╢рж╛рж▓рзА - рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА, ржЬрж░рзБрж░рж┐ ржнрж╛рж╖рж╛',
  'neutral': 'ржирж┐рж░ржкрзЗржХрзНрж╖ - ржмрж╕рзНрждрзБржирж┐рж╖рзНржа, ржЖржмрзЗржЧржорзБржХрзНржд',
  'academic': 'рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ - ржкрж░рж┐ржнрж╛рж╖рж╛, рждрзГрждрзАржпрж╝ ржкрзБрж░рзБрж╖'
};

/**
 * рж╕ржм ржХрж┐ржЫрзБ ржПржХржЯрж┐ prompt-ржП - ржПржХржЯрж┐ ржорж╛рждрзНрж░ API call
 */
export const buildUnifiedPrompt = (options: UnifiedPromptOptions): string => {
  const { text, docType, style, tone } = options;
  const docCfg = DOC_TYPE_CONFIG[docType];

  const wordCount = text.trim().split(/\s+/).filter(Boolean).length;
  const maxSpellingErrors = Math.min(50, Math.ceil(wordCount * 0.3));

  let styleSection = '';
  if (style && style !== 'none') {
    const styleDesc = style === 'sadhu' 
      ? 'рж╕рж╛ржзрзБ рж░рзАрждрж┐рждрзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзБржи'
      : 'ржЪрж▓рж┐ржд рж░рзАрждрж┐рждрзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзБржи';
    styleSection = `
@STYLE
${styleDesc}
ржХрж░рж┐ржпрж╝рж╛ржЫрж┐|ржХрж░рзЗржЫрж┐|ржХрзНрж░рж┐ржпрж╝рж╛ржкржж|5
рждрж╛рж╣рж╛рж░|рждрж╛рж░|рж╕рж░рзНржмржирж╛ржо|10`;
  }

  let toneSection = '';
  if (tone && toneDescriptions[tone]) {
    toneSection = `
@TONE
${toneDescriptions[tone]}
рждрзБржорж┐|ржЖржкржирж┐|рж╕ржорзНржорж╛ржирж╕рзВржЪржХ|0`;
  }

  return `ржЖржкржирж┐ ржПржХржЬржи ржжржХрзНрж╖ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮ ржПржмржВ ржкрзНрж░рзБржлрж░рж┐ржбрж╛рж░ред
${docCfg.mainHint}

тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ЁЯУЭ ржмрж┐рж╢рзНрж▓рзЗрж╖ржгрзЗрж░ ржЬржирзНржп ржЯрзЗржХрзНрж╕ржЯ (${wordCount} рж╢ржмрзНржж):
тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
${text}
тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР

ЁЯОп ржЖржкржирж╛рж░ ржХрж╛ржЬ: ржирж┐ржЪрзЗрж░ рж╕ржм sections ржкрзВрж░ржг ржХрж░рзБржи (ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ)

тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ЁЯУЛ SECTION 1: @SPELLING (ржмрж╛ржирж╛ржи ржнрзБрж▓)
тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
рж╢рзБржзрзБ ржирж┐рж╢рзНржЪрж┐ржд ржмрж╛ржирж╛ржи ржнрзБрж▓ ржЦрзБржБржЬрзБржи (рж╕рж░рзНржмрзЛржЪрзНржЪ ${maxSpellingErrors}ржЯрж┐)

ржлрж░ржорзНржпрж╛ржЯ: ржнрзБрж▓_рж╢ржмрзНржж|рж╕ржарж┐ржХрзз,рж╕ржарж┐ржХрзи|position

ржЙржжрж╛рж╣рж░ржг:
ржмрзНржпрж╛ржерж╛|ржмрзНржпржерж╛|15
ржХрж╛рж░ржирзЗ|ржХрж╛рж░ржгрзЗ|23

тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ЁЯУЛ SECTION 2: @PUNCTUATION (ржмрж┐рж░рж╛ржо ржЪрж┐рж╣рзНржи) тЪая╕П ржЕржмрж╢рзНржпржЗ ржкрзВрж░ржг ржХрж░рзБржи
тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ржкрзНрж░рждрж┐ржЯрж┐ ржмрж╛ржХрзНржп ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржи:

рзз. ржмрж╛ржХрзНржпрзЗрж░ рж╢рзЗрж╖рзЗ ржжрж╛ржБржбрж╝рж┐ (ред) ржЖржЫрзЗ ржХрж┐ржирж╛
рзи. ржкрзНрж░рж╢рзНржиржмрж╛ржЪржХ ржмрж╛ржХрзНржпрзЗ ржкрзНрж░рж╢рзНржиржЪрж┐рж╣рзНржи (?) ржЖржЫрзЗ ржХрж┐ржирж╛
рзй. ржЖржмрзЗржЧржкрзВрж░рзНржг ржмрж╛ржХрзНржпрзЗ ржмрж┐рж╕рзНржоржпрж╝ржЪрж┐рж╣рзНржи (!) ржЖржЫрзЗ ржХрж┐ржирж╛
рзк. рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржХржорж╛ (,) ржЖржЫрзЗ ржХрж┐ржирж╛
рзл. ржжрзАрж░рзНржШ ржмрж╛ржХрзНржпрзЗ ржпржерж╛ржпрже ржХржорж╛ ржЖржЫрзЗ ржХрж┐ржирж╛

ржлрж░ржорзНржпрж╛ржЯ (ржкрзНрж░рждрж┐ржЯрж┐ рж╕ржорж╕рзНржпрж╛рж░ ржЬржирзНржп):
issue:рж╕ржорж╕рзНржпрж╛рж░ ржмрж░рзНржгржирж╛
cur:ржмрж░рзНрждржорж╛ржи ржмрж╛ржХрзНржп (рж╣рзБржмрж╣рзБ ржЯрзЗржХрзНрж╕ржЯ ржерзЗржХрзЗ)
fix:рж╕ржВрж╢рзЛржзрж┐ржд ржмрж╛ржХрзНржп
exp:ржХрзЗржи ржПржЯрж┐ ржкрзНрж░ржпрж╝рзЛржЬржи
pos:ржмрж╛ржХрзНржпрзЗрж░ ржкрзНрж░ржержо рж╢ржмрзНржжрзЗрж░ position
---

ржЙржжрж╛рж╣рж░ржг:
issue:ржмрж╛ржХрзНржпрзЗрж░ рж╢рзЗрж╖рзЗ ржжрж╛ржБржбрж╝рж┐ ржирзЗржЗ
cur:ржЖржорж┐ ржмрж╛ржЬрж╛рж░рзЗ ржЧрж┐ржпрж╝рзЗржЫрж┐
fix:ржЖржорж┐ ржмрж╛ржЬрж╛рж░рзЗ ржЧрж┐ржпрж╝рзЗржЫрж┐ред
exp:ржкрзВрж░рзНржг ржмрж╛ржХрзНржпрзЗрж░ рж╢рзЗрж╖рзЗ ржжрж╛ржБржбрж╝рж┐ ржЖржмрж╢рзНржпржХ
pos:0
---
issue:ржкрзНрж░рж╢рзНржиржмрзЛржзржХ ржЪрж┐рж╣рзНржи ржирзЗржЗ
cur:рждрзБржорж┐ ржХрзЛржерж╛ржпрж╝ ржпрж╛ржЪрзНржЫ
fix:рждрзБржорж┐ ржХрзЛржерж╛ржпрж╝ ржпрж╛ржЪрзНржЫ?
exp:ржкрзНрж░рж╢рзНржиржмрж╛ржЪржХ ржмрж╛ржХрзНржпрзЗ ржкрзНрж░рж╢рзНржиржЪрж┐рж╣рзНржи ржкрзНрж░ржпрж╝рзЛржЬржи
pos:8
---
issue:рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржХржорж╛ ржирзЗржЗ
cur:ржЖржо ржЬрж╛ржо ржХрж╛ржБржарж╛рж▓ рж▓рж┐ржЪрзБ
fix:ржЖржо, ржЬрж╛ржо, ржХрж╛ржБржарж╛рж▓, рж▓рж┐ржЪрзБ
exp:рждрж╛рж▓рж┐ржХрж╛рж░ ржкрзНрж░рждрж┐ржЯрж┐ ржЖржЗржЯрзЗржорзЗрж░ ржкрж░рзЗ ржХржорж╛ ржжрж┐рждрзЗ рж╣ржпрж╝
pos:15

тЪая╕П ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг: 
- ржкрзНрж░рждрж┐ржЯрж┐ ржмрж┐рж░рж╛ржо ржЪрж┐рж╣рзНржи рж╕ржорж╕рзНржпрж╛ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ржжрж┐ржи
- --- ржжрж┐ржпрж╝рзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рзБржи
- ржХржоржкржХрзНрж╖рзЗ рзй-рзлржЯрж┐ рж╕ржорж╕рзНржпрж╛ ржЦрзБржБржЬрзБржи (ржпржжрж┐ ржерж╛ржХрзЗ)

тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ЁЯУЛ SECTION 3: @EUPHONY (рж╢рзНрж░рзБрждрж┐ржоржзрзБрж░рждрж╛) тЪая╕П ржЕржмрж╢рзНржпржЗ ржкрзВрж░ржг ржХрж░рзБржи
тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ржЦрзБржБржЬрзБржи:
рзз. ржПржХржЗ рж╢ржмрзНржж ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ (ржпрзЗржоржи: "ржЕржирзЗржХ ржЕржирзЗржХ", "рж╕ржм рж╕ржм")
рзи. ржХржарж┐ржи/ржнрж╛рж░рзА рж╢ржмрзНржж (ржпрзЗржоржи: "ржЕрждрзНржпржзрж┐ржХ", "ржЕрждрзНржпржирзНржд", "ржЕржкрж░рж┐рж╣рж╛рж░рзНржп")
рзй. ржжрзАрж░рзНржШ ржЬржЯрж┐рж▓ ржмрж╛ржХрзНржп
рзк. ржПржХржЗ ржмрж╛ржХрзНржпрзЗ ржПржХржЗ рж╢ржмрзНржж ржмрж╛рж░ржмрж╛рж░

ржлрж░ржорзНржпрж╛ржЯ: рж╢ржмрзНржж/ржмрж╛ржХрзНржпрж╛ржВрж╢|ржмрж┐ржХрж▓рзНржкрзз,ржмрж┐ржХрж▓рзНржкрзи|ржХрж╛рж░ржг|position

ржЙржжрж╛рж╣рж░ржг:
ржЕржирзЗржХ ржЕржирзЗржХ|ржЕржирзЗржХ,ржЦрзБржм|рж╢ржмрзНржж ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржПржбрж╝рж╛ржи|5
ржЕрждрзНржпржзрж┐ржХ|ржЦрзБржм,ржмрзЗрж╢рж┐,ржЕржирзЗржХ|рж╕рж╣ржЬ рж╢ржмрзНржж ржмрзЗрж╢рж┐ ржмрзЛржзржЧржорзНржп|12
рж╕ржм рж╕ржм|рж╕ржм,рж╕ржорж╕рзНржд|ржЕржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐|20
ржмрж╛рж░ржмрж╛рж░|ржкрзБржирж░рж╛ржпрж╝,ржЖржмрж╛рж░|ржПржХржЗ рж╢ржмрзНржж ржПржбрж╝рж╛ржи|25

тЪая╕П ржХржоржкржХрзНрж╖рзЗ рзй-рзлржЯрж┐ рж╢рзНрж░рзБрждрж┐ржоржзрзБрж░рждрж╛ ржЙржирзНржирждрж┐рж░ рж╕рж╛ржЬрзЗрж╢ржи ржжрж┐ржи (ржпржжрж┐ ржерж╛ржХрзЗ)

тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ЁЯУЛ SECTION 4: @MIXING (ржнрж╛рж╖рж╛рж░рзАрждрж┐ ржорж┐рж╢рзНрж░ржг)
тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
рж╕рж╛ржзрзБ ржУ ржЪрж▓рж┐ржд ржорж┐рж╢рзНрж░рж┐ржд ржЖржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзБржи

detected:true/false
style:ржЪрж▓рж┐ржд/рж╕рж╛ржзрзБ
reason:ржХрж╛рж░ржг
@CORRECTIONS
ржЧрж┐ржпрж╝рж╛ржЫрж┐рж▓рж╛ржо|ржЧрж┐ржпрж╝рзЗржЫрж┐рж▓рж╛ржо|рж╕рж╛ржзрзБтЖТржЪрж▓рж┐ржд|3
ржмрж▓рж┐рж▓рзЗржи|ржмрж▓рж▓рзЗржи|рж╕рж╛ржзрзБтЖТржЪрж▓рж┐ржд|10

тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ЁЯУЛ SECTION 5: @CONTENT (ржХржиржЯрзЗржирзНржЯ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг) тЪая╕П ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ
тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
${docCfg.contentHint}

ржлрж░ржорзНржпрж╛ржЯ:
type:рж▓рзЗржЦрж╛рж░ ржзрж░ржи (ржкрзНрж░ржмржирзНржз/ржЪрж┐ржарж┐/ржЧрж▓рзНржк/ржмрзНрж▓ржЧ/рж░рж┐ржкрзЛрж░рзНржЯ/ржирж┐ржмржирзНржз)
desc:ржПржХ ржмрж╛ржХрзНржпрзЗ ржорзВрж▓ ржмрж┐рж╖ржпрж╝ржмрж╕рзНрждрзБ
missing:ржЕржирзБржкрж╕рзНржерж┐ржд ржЙржкрж╛ржжрж╛ржирзз,ржЕржирзБржкрж╕рзНржерж┐ржд ржЙржкрж╛ржжрж╛ржирзи,ржЕржирзБржкрж╕рзНржерж┐ржд ржЙржкрж╛ржжрж╛ржирзй
tips:ржкрж░рж╛ржорж░рзНрж╢рзз,ржкрж░рж╛ржорж░рзНрж╢рзи,ржкрж░рж╛ржорж░рзНрж╢рзй

ржЙржжрж╛рж╣рж░ржг:
type:ржЖржмрзЗржжржи ржкрждрзНрж░
desc:рж╕рзНржХрзБрж▓рзЗ ржЕржирзБржкрж╕рзНржерж┐рждрж┐рж░ ржЬржирзНржп ржЫрзБржЯрж┐рж░ ржЖржмрзЗржжржи
missing:рждрж╛рж░рж┐ржЦ ржЙрж▓рзНрж▓рзЗржЦ ржирзЗржЗ,ржкрзНрж░рж╛ржкржХрзЗрж░ ржкржжржмрж┐ ржирзЗржЗ,рж╕рзНржмрж╛ржХрзНрж╖рж░ ржирзЗржЗ
tips:рж╕ржарж┐ржХ рждрж╛рж░рж┐ржЦ ржпрзЛржЧ ржХрж░рзБржи,ржкрзНрж░рж╛ржкржХрзЗрж░ рж╕ржорзНржкрзВрж░рзНржг ржкржжржмрж┐ рж▓рж┐ржЦрзБржи,рж╢рзЗрж╖рзЗ рж╕рзНржмрж╛ржХрзНрж╖рж░ ржжрж┐ржи

тЪая╕П ржПржЗ section ржЕржмрж╢рзНржпржЗ ржкрзВрж░ржг ржХрж░рждрзЗ рж╣ржмрзЗ
${styleSection}
${toneSection}

тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР
ЁЯУд FINAL OUTPUT FORMAT (рж╢рзБржзрзБ ржПржЯрж┐, ржЕржирзНржп ржХрж┐ржЫрзБ ржиржпрж╝):
тХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХРтХР

@SPELLING
[ржмрж╛ржирж╛ржи ржнрзБрж▓ ржПржЦрж╛ржирзЗ - ржирж╛ ржерж╛ржХрж▓рзЗ ржЦрж╛рж▓рж┐]

@PUNCTUATION
[ржмрж┐рж░рж╛ржо ржЪрж┐рж╣рзНржи рж╕ржорж╕рзНржпрж╛ ржПржЦрж╛ржирзЗ - ржкрзНрж░рждрж┐ржЯрж┐ --- ржжрж┐ржпрж╝рзЗ ржЖрж▓рж╛ржжрж╛]

@EUPHONY
[рж╢рзНрж░рзБрждрж┐ржоржзрзБрж░рждрж╛ ржЙржирзНржирждрж┐ ржПржЦрж╛ржирзЗ]

@MIXING
detected:false
[ржмрж╛ detected:true рж╕рж╣ corrections]

@CONTENT
type:
desc:
missing:
tips:

тЪая╕ПтЪая╕ПтЪая╕П CRITICAL INSTRUCTIONS тЪая╕ПтЪая╕ПтЪая╕П
1. @PUNCTUATION section ржЕржмрж╢рзНржпржЗ ржкрзВрж░ржг ржХрж░рзБржи - ржкрзНрж░рждрж┐ржЯрж┐ ржмрж╛ржХрзНржп ржЪрзЗржХ ржХрж░рзБржи
2. @EUPHONY section ржЕржмрж╢рзНржпржЗ ржкрзВрж░ржг ржХрж░рзБржи - ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржУ ржХржарж┐ржи рж╢ржмрзНржж ржЦрзБржБржЬрзБржи
3. @CONTENT section ржЕржмрж╢рзНржпржЗ ржкрзВрж░ржг ржХрж░рзБржи - type, desc, missing, tips рж╕ржм ржжрж┐ржи
4. ржПржХрж╛ржзрж┐ржХ рж╕ржорж╕рзНржпрж╛ ржерж╛ржХрж▓рзЗ рж╕ржм ржжрж┐ржи (рж╢рзБржзрзБ ржПржХржЯрж┐ ржиржпрж╝)
5. ржкрзНрж░рждрж┐ржЯрж┐ section ржПрж░ рж╣рзЗржбрж╛рж░ (@SECTION) ржЕржмрж╢рзНржпржЗ ржжрж┐ржи
6. pos = 0-based word index (ржкрзНрж░ржержо рж╢ржмрзНржж = 0)
7. рж╢ржмрзНржж рж╣рзБржмрж╣рзБ ржЯрзЗржХрзНрж╕ржЯ ржерзЗржХрзЗ ржХржкрж┐ ржХрж░рзБржи

ржПржЦржи рж╢рзБрж░рзБ ржХрж░рзБржи - рж╕ржм sections ржкрзВрж░ржг ржХрж░рзБржи:`;
};
