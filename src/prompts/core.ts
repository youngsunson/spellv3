// src/prompts/core.ts

/**
 * ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржк
 */
export type DocType = 'generic' | 'academic' | 'official' | 'marketing' | 'social';

/**
 * ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржк ржХржиржлрж┐ржЧ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕
 */
export interface DocTypeConfig {
  label: string;
  description: string;
  defaultTone: string;
  mainHint: string;
  contentHint: string;
}

/**
 * ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржк ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи
 */
export const DOC_TYPE_CONFIG: { [key in DocType]: DocTypeConfig } = {
  generic: {
    label: 'рж╕рж╛ржзрж╛рж░ржг рж▓рзЗржЦрж╛',
    description: 'ржпрзЗржХрзЛржирзЛ рж╕рж╛ржзрж╛рж░ржг рж▓рзЗржЦрж╛ тАУ ржирж┐рж░ржкрзЗржХрзНрж╖ржнрж╛ржмрзЗ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░ржмрзЗред',
    defaultTone: '',
    mainHint: 'ржПржЯрж┐ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржмрж╛ржВрж▓рж╛ рж▓рзЗржЦрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред',
    contentHint: 'рж╕рж╛ржзрж╛рж░ржг рж▓рзЗржЦрж╛рж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржорзВрж▓ ржмржХрзНрждржмрзНржп ржкрж░рж┐рж╖рзНржХрж╛рж░ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржПржмржВ ржЧржаржиржЧржд ржпрзМржХрзНрждрж┐ржХрждрж╛ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред'
  },
  academic: {
    label: 'ржПржХрж╛ржбрзЗржорж┐ржХ рж▓рзЗржЦрж╛',
    description: 'ржЧржмрзЗрж╖ржгрж╛ ржкрждрзНрж░, ржкрзНрж░ржмржирзНржз, ржерж┐рж╕рж┐рж╕ ржЗрждрзНржпрж╛ржжрж┐ред',
    defaultTone: 'academic',
    mainHint: 'ржПржЯрж┐ ржПржХрж╛ржбрзЗржорж┐ржХ/ржЧржмрзЗрж╖ржгрж╛ржорзВрж▓ржХ рж▓рзЗржЦрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред ржнрж╛рж╖рж╛рж░ рж╢рзБржжрзНржзрждрж╛, ржЯрж╛рж░рзНржорж┐ржирзЛрж▓ржЬрж┐ ржПржмржВ ржЖржирзБрж╖рзНржарж╛ржирж┐ржХрждрж╛ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржиред',
    contentHint: 'ржПржХрж╛ржбрзЗржорж┐ржХ рж▓рзЗржЦрж╛рж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржнрзВржорж┐ржХрж╛, ржпрзБржХрзНрждрж┐, ржЙржжрж╛рж╣рж░ржг ржУ ржЙржкрж╕ржВрж╣рж╛рж░ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржПржмржВ рж░рзЗржлрж╛рж░рзЗржирзНрж╕/ржЙрзОрж╕ ржЙрж▓рзНрж▓рзЗржЦ ржЖржЫрзЗ ржХрж┐ ржирж╛ рж▓ржХрзНрж╖рзНржп ржХрж░рзБржиред'
  },
  official: {
    label: 'ржЕржлрж┐рж╢рж┐ржпрж╝рж╛рж▓ ржЪрж┐ржарж┐',
    description: 'ржжрж╛ржкрзНрждрж░рж┐ржХ ржЖржмрзЗржжржи, ржирзЛржЯрж┐рж╢, ржЕржлрж┐рж╕рж┐ржпрж╝рж╛рж▓ ржЗржорзЗржЗрж▓ ржЗрждрзНржпрж╛ржжрж┐ред',
    defaultTone: 'formal',
    mainHint: 'ржПржЯрж┐ ржПржХржЯрж┐ ржЕржлрж┐рж╕рж┐ржпрж╝рж╛рж▓/ржжрж╛ржкрзНрждрж░рж┐ржХ рж▓рзЗржЦрж╛ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред ржнржжрзНрж░рждрж╛, рж╕ржорзНржорж╛ржирж╕рзВржЪржХ рж╕ржорзНржмрзЛржзржи ржУ рж╕рзНржкрж╖рзНржЯрждрж╛ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржиред',
    contentHint: 'ржЕржлрж┐рж╢рж┐ржпрж╝рж╛рж▓ рж▓рзЗржЦрж╛ржпрж╝ ржкрзНрж░рж╛ржкржХ, ржмрж┐рж╖ржпрж╝, ржЙржжрзНржжрзЗрж╢рзНржп, ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рждржерзНржп ржУ ржмрж┐ржирзАржд ржЙржкрж╕ржВрж╣рж╛рж░ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред'
  },
  marketing: {
    label: 'ржорж╛рж░рзНржХрзЗржЯрж┐ржВ ржХржкрж┐',
    description: 'ржмрж┐ржЬрзНржЮрж╛ржкржи, рж╕рзЗрж▓рж╕ ржкрзЗржЬ, ржкрзНрж░ржорзЛрж╢ржирж╛рж▓ рж▓рзЗржЦрж╛ ржЗрждрзНржпрж╛ржжрж┐ред',
    defaultTone: 'persuasive',
    mainHint: 'ржПржЯрж┐ ржПржХржЯрж┐ ржорж╛рж░рзНржХрзЗржЯрж┐ржВ/ржкрзНрж░ржорзЛрж╢ржирж╛рж▓ рж▓рзЗржЦрж╛ рж╣рж┐рж╕рж╛ржмрзЗ ржзрж░рзБржиред ржкрзНрж░ржнрж╛ржмрж╢рж╛рж▓рзА, ржЖржХрж░рзНрж╖ржгрзАржпрж╝ ржУ рж╕рзНржкрж╖рзНржЯ ржмрж╛рж░рзНрждрж╛рж░ ржУржкрж░ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржиред',
    contentHint: 'ржорж╛рж░рзНржХрзЗржЯрж┐ржВ ржХржиржЯрзЗржирзНржЯрзЗ ржкрзНрж░рж╕рзНрждрж╛ржмрж┐ржд ржкржгрзНржп/рж╕рзЗржмрж╛, ржПрж░ ржЙржкржХрж╛рж░рж┐рждрж╛, рж╕рзНржкрж╖рзНржЯ ржХрж▓-ржЯрзБ-ржЕрзНржпрж╛ржХрж╢ржи (CTA) ржПржмржВ рж▓ржХрзНрж╖рзНржпржорж╛рждрзНрж░рж╛ ржкрж╛ржаржХрзЗрж░ ржЬржирзНржп ржЙржкржпрзЛржЧрзА ржнрж╛рж╖рж╛ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред'
  },
  social: {
    label: 'рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржкрзЛрж╕рзНржЯ',
    description: 'ржлрзЗрж╕ржмрзБржХ, ржЗржирж╕рзНржЯрж╛ржЧрзНрж░рж╛ржо, ржЯрзБржЗржЯрж╛рж░ ржЗрждрзНржпрж╛ржжрж┐рж░ рж▓рзЗржЦрж╛ред',
    defaultTone: 'informal',
    mainHint: 'ржПржЯрж┐ ржПржХржЯрж┐ рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржкрзЛрж╕рзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржиред рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ, ржмржирзНржзрзБрждрзНржмржкрзВрж░рзНржг ржУ ржЖржХрж░рзНрж╖ржгрзАржпрж╝ ржнрж╛рж╖рж╛ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржиред',
    contentHint: 'рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржкрзЛрж╕рзНржЯрзЗ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржмрж╛рж░рзНрждрж╛, ржЙржкржпрзБржХрзНржд ржЯрзЛржи, ржЗржЩрзНржЧрзЗржЬржорзЗржирзНржЯ ржмрж╛ржбрж╝рж╛ржирзЛрж░ ржЙржкрж╛ржжрж╛ржи (ржкрзНрж░рж╢рзНржи, CTA, рж╣рзНржпрж╛рж╢ржЯрзНржпрж╛ржЧ ржЗрждрзНржпрж╛ржжрж┐) ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзБржиред'
  }
};

/**
 * ржбржХрзБржорзЗржирзНржЯ ржЯрж╛ржЗржкрзЗрж░ рж▓рзЗржмрзЗрж▓ ржкрзЗрждрзЗ
 */
export const getDocTypeLabel = (t: DocType): string => DOC_TYPE_CONFIG[t].label;

/**
 * ржорзВрж▓ ржмрж╛ржирж╛ржи ржУ ржмрзНржпрж╛ржХрж░ржг ржкрзНрж░ржорзНржкржЯ рждрзИрж░рж┐ (TOON Format)
 */
export const buildMainPrompt = (text: string, docType: DocType): string => {
  const docCfg = DOC_TYPE_CONFIG[docType];
  return `ржЖржкржирж┐ ржПржХржЬржи ржжржХрзНрж╖ ржмрж╛ржВрж▓рж╛ ржкрзНрж░рзБржлрж░рж┐ржбрж╛рж░ред
${docCfg.mainHint}

ржЯрзЗржХрзНрж╕ржЯ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржи:
"""${text}"""

тЪая╕П ржирж┐рж░рзНржжрзЗрж╢ржирж╛:
тАв position = рж╢ржмрзНржжрзЗрж░ 0-based word index (рж╕рзНржкрзЗрж╕ ржжрж┐ржпрж╝рзЗ ржнрж╛ржЧ ржХрж░рзЗ ржЧрзБржирзБржи)
тАв рж╢рзБржзрзБ ржирж┐рж╢рзНржЪрж┐ржд ржнрзБрж▓ ржзрж░рзБржиред ржирж╛ржо, ржмрзНрж░рзНржпрж╛ржирзНржб, ржЗржВрж░рзЗржЬрж┐ рж╢ржмрзНржж ржмрж╛ржж ржжрж┐ржи
тАв ржЗржиржкрзБржЯ ржерзЗржХрзЗ рж╣рзБржмрж╣рзБ ржХржкрж┐ ржХрж░рзБржи

ЁЯУд TOON ржлрж░ржорзНржпрж╛ржЯрзЗ ржЙрждрзНрждрж░ ржжрж┐ржи (рж╢рзБржзрзБ ржПржЗ ржлрж░ржорзНржпрж╛ржЯ, ржХрзЛржирзЛ ржмрзНржпрж╛ржЦрзНржпрж╛ ржиржпрж╝):

@SPELLING
ржнрзБрж▓_рж╢ржмрзНржж|рж╕ржарж┐ржХрзз,рж╕ржарж┐ржХрзи|position
ржнрзБрж▓_рж╢ржмрзНржжрзи|рж╕ржарж┐ржХ|position

@MIXING
detected:true/false
style:ржЪрж▓рж┐ржд/рж╕рж╛ржзрзБ
reason:ржХрж╛рж░ржг
@CORRECTIONS
ржмрж░рзНрждржорж╛ржи|рж╕ржВрж╢рзЛржзржи|ржЯрж╛ржЗржк|position

@PUNCTUATION
issue:рж╕ржорж╕рзНржпрж╛рж░ ржмрж░рзНржгржирж╛
cur:ржЗржиржкрзБржЯ ржмрж╛ржХрзНржп рж╣рзБржмрж╣рзБ
fix:рж╕ржВрж╢рзЛржзрж┐ржд ржмрж╛ржХрзНржп
exp:ржмрзНржпрж╛ржЦрзНржпрж╛
pos:position
---

@EUPHONY
рж╢ржмрзНржж|ржмрж┐ржХрж▓рзНржкрзз,ржмрж┐ржХрж▓рзНржкрзи|ржХрж╛рж░ржг|position

тЬЕ ржпрзЗ рж╕рзЗржХрж╢ржирзЗ ржХрж┐ржЫрзБ ржирзЗржЗ рж╕рзЗржЯрж┐ ржЦрж╛рж▓рж┐ рж░рж╛ржЦрзБржи (рж╢рзБржзрзБ @SECTION рж╣рзЗржбрж╛рж░)
тЬЕ | ржжрж┐ржпрж╝рзЗ ржлрж┐рж▓рзНржб ржЖрж▓рж╛ржжрж╛ ржХрж░рзБржи
тЬЕ --- ржжрж┐ржпрж╝рзЗ punctuation ржПрж░ ржПржХрж╛ржзрж┐ржХ ржЖржЗржЯрзЗржо ржЖрж▓рж╛ржжрж╛ ржХрж░рзБржи`;
};